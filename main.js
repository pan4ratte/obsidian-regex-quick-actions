/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

var en = {
    /* Section headers */
    PLUGIN_SETTINGS_HEADER: "Regex Quick Actions settings",
    MANAGE_SECTION_HEADER: "Manage quick actions",
    GENERAL_SECTION_HEADER: "General",
    PLUGIN_DESC: "This plugin allows you to create and quickly apply regex actions via: the command palette (any action), the file explorer context menu (default action), the file context menu (default action). Every saved action becomes a palette command, which ensures automatisation possibilities.",
    /* Generic buttons */
    ADD: "Add",
    SAVE: "Save",
    CANCEL: "Cancel",
    YES: "Yes",
    EDIT: "Edit",
    DELETE: "Delete",
    /* Dialog texts */
    DELETE_HEADER: "Delete quick action",
    DELETE_CONFIRM: "Are you sure you want to delete quick action \"{}\"?",
    FOLDER_ACTION_CONFIRM_TITLE: "Run quick action on folder",
    FOLDER_ACTION_CONFIRM_MSG: "Are you sure that you want to run default quick action on every file inside this folder? This action is irreversible.",
    /* Descriptions */
    PLACEHOLDER_NAME: "Used to call quick actions via command palette",
    PLACEHOLDER_SEARCH: "Search pattern",
    PLACEHOLDER_FLAGS: "e.g. gm",
    PLACEHOLDER_REPLACEMENT: "Replacement text",
    ADD_QUICK_ACTION: "New quick action",
    ACTION_NAME: "Quick action name",
    SEARCH_REGEX: "Regex rule",
    FLAGS: "Flags",
    REPLACEMENT: "Replacement",
    SET_AS_DEFAULT: "Set as default quick action",
    RUN_DEFAULT: "Run default quick action",
    RUN_DEFAULT_ON_FOLDER: "Run default quick action on folder",
    CONFIRM_FOLDER_ACTION: "Confirmation for quick action on folder",
    CONFIRM_FOLDER_ACTION_DESC: "Show a confirmation dialog before running quick action on every file inside a chosen folder.",
    /* Errors and messages */
    NAME_EMPTY_ERR: "Error: Quick action name cannot be empty!",
    NAME_EXISTS_ERR: "Error: An action with this name already exists!",
    PATTERN_EMPTY_ERR: "Error: Regex pattern cannot be empty!",
    FLAGS_INVALID_ERR: "Error: Invalid regex flags provided!",
    REGEX_INVALID_ERR: "Error: Invalid regular expression syntax!",
    NOT_FOUND_ERR: " not found!",
    EXECUTED_MSG: "Executed '{}' with {} replacements."
};

var ru = {
    /* Section headers */
    PLUGIN_SETTINGS_HEADER: "Настройки Regex Quick Actions",
    MANAGE_SECTION_HEADER: "Управление быстрыми командами",
    GENERAL_SECTION_HEADER: "Основные",
    PLUGIN_DESC: "Данный плагин позволяет создавать и быстро применять команды regex через: палитру команд (любые команды), контекстное меню файла в проводнике (команда по умолчанию), контекстное меню папки в проводнике (команда по умолчанию), контекстное меню заметки в редакторе (команда по умолчанию). Каждая сохранённая команда появляется в палитре команд, что позволяет использовать плагин для автоматизации.",
    /* Generic buttons */
    ADD: "Добавить",
    SAVE: "Сохранить",
    CANCEL: "Отменить",
    YES: "Да",
    EDIT: "Редактировать",
    DELETE: "Удалить",
    /* Dialog texts */
    DELETE_HEADER: "Удалить быструю команду",
    DELETE_CONFIRM: "Вы уверены, что хотите удалить быструю команду \"{}\"?",
    FOLDER_ACTION_CONFIRM_TITLE: "Применить быструю команду к папке",
    FOLDER_ACTION_CONFIRM_MSG: "Вы уверены, что хотите применить быструю команду по умолчанию к каждому файлу внутри этой папки? Это действие нельзя отменить.",
    /* Descriptions */
    PLACEHOLDER_NAME: "Используется для вызова быстрой команды через палитру команд",
    PLACEHOLDER_SEARCH: "Паттерн для поиска",
    PLACEHOLDER_FLAGS: "напр. gm",
    PLACEHOLDER_REPLACEMENT: "Паттерн для замены",
    ADD_QUICK_ACTION: "Новая быстрая команда",
    ACTION_NAME: "Название быстрой команды",
    SEARCH_REGEX: "Правило regex",
    FLAGS: "Флаги",
    REPLACEMENT: "Замена",
    SET_AS_DEFAULT: "Установить как быструю команду по умолчанию",
    RUN_DEFAULT: "Применить быструю команду по умолчанию",
    RUN_DEFAULT_ON_FOLDER: "Применить быструю команду по умолчанию к папке",
    CONFIRM_FOLDER_ACTION: "Подтверждение перед применением быстрой команды к папке",
    CONFIRM_FOLDER_ACTION_DESC: "Показывать диалог подтверждения перед применением быстрой команды к каждому файлу в выбранной папке.",
    /* Errors and messages */
    NAME_EMPTY_ERR: "Ошибка: Имя быстрой команды не может быть пустым!",
    NAME_EXISTS_ERR: "Ошибка: Команда с таким же именем уже существует!",
    PATTERN_EMPTY_ERR: "Ошибка: Паттерн regex не может быть пустым!",
    FLAGS_INVALID_ERR: "Ошибка: Указаны некорректные флаги regex!",
    REGEX_INVALID_ERR: "Ошибка: Некорректный синтаксис регулярного выражения!",
    NOT_FOUND_ERR: " не найдено!",
    EXECUTED_MSG: "Команда '{}' применена с {} заменами."
};

const MESSAGES = {
    en: en,
    ru: ru,
};
const locale = obsidian.moment.locale();
/**
 * Translates a key into the current locale string.
 * @param key - A valid key from the locale files
 * @param args - Values to replace '{}' placeholders in the string
 */
const t = (key, ...args) => {
    // Check if the current locale exists in our MESSAGES, otherwise fallback to English
    const lang = MESSAGES[locale] ? locale : 'en';
    let text = MESSAGES[lang][key] || MESSAGES['en'][key];
    args.forEach(arg => {
        text = text.replace('{}', String(arg));
    });
    return text;
};

const DEFAULT_SETTINGS = {
    rules: [],
    defaultRule: null,
    confirmFolderAction: true
};
class RegexQuickActions extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.loadSettings();
            this.pathToRulesets = this.app.vault.configDir + "/regex-rulesets";
            this.addSettingTab(new RegexQuickActionsSettingsTab(this.app, this));
            this.settings.rules.forEach(ruleName => {
                this.addRuleCommand(ruleName);
            });
            this.registerEvent(this.app.workspace.on("file-menu", (menu, file) => {
                if (file instanceof obsidian.TFile && this.settings.defaultRule) {
                    menu.addItem((item) => {
                        item
                            .setTitle(t('RUN_DEFAULT'))
                            .setIcon("play")
                            .onClick(() => __awaiter(this, void 0, void 0, function* () {
                            yield this.applyRulesetToFile(file, this.settings.defaultRule);
                        }));
                    });
                }
                if (file instanceof obsidian.TFolder && this.settings.defaultRule) {
                    menu.addItem((item) => {
                        item
                            .setTitle(t('RUN_DEFAULT_ON_FOLDER'))
                            .setIcon("play")
                            .onClick(() => {
                            const run = () => __awaiter(this, void 0, void 0, function* () {
                                yield this.applyRulesetToFolder(file, this.settings.defaultRule);
                            });
                            if (this.settings.confirmFolderAction) {
                                new ConfirmationModal(this.app, t('FOLDER_ACTION_CONFIRM_TITLE'), t('FOLDER_ACTION_CONFIRM_MSG'), t('YES'), run).open();
                            }
                            else {
                                run();
                            }
                        });
                    });
                }
            }));
            this.registerEvent(this.app.workspace.on("editor-menu", (menu) => {
                if (this.settings.defaultRule) {
                    menu.addItem((item) => {
                        item
                            .setTitle(t('RUN_DEFAULT'))
                            .setIcon("play")
                            .onClick(() => __awaiter(this, void 0, void 0, function* () {
                            yield this.applyRuleset(this.pathToRulesets + "/" + this.settings.defaultRule);
                        }));
                    });
                }
            }));
            yield this.reloadRulesets();
        });
    }
    getCommandId(name) {
        return `apply-rule-${name.toLowerCase().replace(/[^a-z0-9]/g, '-')}`;
    }
    addRuleCommand(name) {
        this.addCommand({
            id: this.getCommandId(name),
            name: `${name}`,
            checkCallback: (checking) => {
                const activeMarkdownView = this.app.workspace.getActiveViewOfType(obsidian.MarkdownView);
                if (activeMarkdownView) {
                    if (!checking) {
                        this.applyRuleset(this.pathToRulesets + "/" + name);
                    }
                    return true;
                }
                return false;
            }
        });
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
    reloadRulesets() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!(yield this.app.vault.adapter.exists(this.pathToRulesets))) {
                yield this.app.vault.createFolder(this.pathToRulesets);
            }
        });
    }
    createRuleset(name, content) {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings.rules.unshift(name);
            const path = this.pathToRulesets + "/" + name;
            yield this.app.vault.adapter.write(path, content);
            yield this.saveSettings();
            this.addRuleCommand(name);
            return true;
        });
    }
    updateRuleset(oldName, newName, content) {
        return __awaiter(this, void 0, void 0, function* () {
            const oldPath = this.pathToRulesets + "/" + oldName;
            const newPath = this.pathToRulesets + "/" + newName;
            yield this.app.vault.adapter.write(newPath, content);
            if (oldName !== newName) {
                if (yield this.app.vault.adapter.exists(oldPath)) {
                    yield this.app.vault.adapter.remove(oldPath);
                }
                this.app.commands.removeCommand(`${this.manifest.id}:${this.getCommandId(oldName)}`);
                const index = this.settings.rules.indexOf(oldName);
                if (index !== -1) {
                    this.settings.rules[index] = newName;
                    if (this.settings.defaultRule === oldName)
                        this.settings.defaultRule = newName;
                    yield this.saveSettings();
                    this.addRuleCommand(newName);
                }
            }
        });
    }
    deleteRuleset(name) {
        return __awaiter(this, void 0, void 0, function* () {
            const path = this.pathToRulesets + "/" + name;
            if (yield this.app.vault.adapter.exists(path)) {
                yield this.app.vault.adapter.remove(path);
            }
            this.app.commands.removeCommand(`${this.manifest.id}:${this.getCommandId(name)}`);
            this.settings.rules = this.settings.rules.filter(r => r !== name);
            if (this.settings.defaultRule === name)
                this.settings.defaultRule = null;
            yield this.saveSettings();
        });
    }
    applyRulesetToFile(file, rulesetName) {
        return __awaiter(this, void 0, void 0, function* () {
            const path = this.pathToRulesets + "/" + rulesetName;
            if (!(yield this.app.vault.adapter.exists(path)))
                return;
            const ruleText = yield this.app.vault.adapter.read(path);
            const count = yield this.modifyFile(file, ruleText, rulesetName);
            new obsidian.Notice(t('EXECUTED_MSG', rulesetName, count));
        });
    }
    applyRulesetToFolder(folder, rulesetName) {
        return __awaiter(this, void 0, void 0, function* () {
            const path = this.pathToRulesets + "/" + rulesetName;
            if (!(yield this.app.vault.adapter.exists(path)))
                return;
            const ruleText = yield this.app.vault.adapter.read(path);
            const files = this.app.vault.getMarkdownFiles().filter(f => f.path.startsWith(folder.path + "/"));
            let totalCount = 0;
            for (const file of files) {
                totalCount += yield this.modifyFile(file, ruleText, rulesetName);
            }
            new obsidian.Notice(t('EXECUTED_MSG', rulesetName, totalCount));
        });
    }
    modifyFile(file, ruleText, rulesetName) {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            const activeView = this.app.workspace.getActiveViewOfType(obsidian.MarkdownView);
            if (activeView && ((_a = activeView.file) === null || _a === void 0 ? void 0 : _a.path) === file.path) {
                const editor = activeView.editor;
                const scroll = editor.getScrollInfo();
                const cursor = editor.getCursor();
                const result = this.processRegex(editor.getValue(), ruleText, rulesetName);
                editor.setValue(result.content);
                editor.setCursor(cursor);
                editor.scrollTo(0, scroll.top);
                return result.count;
            }
            else {
                const fileContent = yield this.app.vault.read(file);
                const result = this.processRegex(fileContent, ruleText, rulesetName);
                yield this.app.vault.modify(file, result.content);
                return result.count;
            }
        });
    }
    processRegex(subject, ruleText, rulesetName) {
        const ruleParser = /^"(.+?)"([a-z]*?)(?:\r\n|\r|\n)?->(?:\r\n|\r|\n)?"(.*?)"([a-z]*?)(?:\r\n|\r|\n)?$/gmus;
        let count = 0;
        let ruleMatches;
        let output = subject;
        while ((ruleMatches = ruleParser.exec(ruleText)) !== null) {
            const [, pattern, flags, replacement, mode] = ruleMatches;
            try {
                const matchRule = new RegExp(pattern, flags || 'gm');
                output = mode === 'x' ? output.replace(matchRule, '') : output.replace(matchRule, replacement);
                count++;
            }
            catch (e) {
                console.error(`Regex Quick Actions: Invalid Regex in ${rulesetName}`, e);
            }
        }
        return { content: output, count };
    }
    applyRuleset(rulesetPath) {
        return __awaiter(this, void 0, void 0, function* () {
            if (!(yield this.app.vault.adapter.exists(rulesetPath))) {
                new obsidian.Notice(rulesetPath + t('NOT_FOUND_ERR'));
                return;
            }
            const ruleText = yield this.app.vault.adapter.read(rulesetPath);
            const activeMarkdownView = this.app.workspace.getActiveViewOfType(obsidian.MarkdownView);
            if (!activeMarkdownView)
                return;
            const editor = activeMarkdownView.editor;
            const subject = editor.somethingSelected() ? editor.getSelection() : editor.getValue();
            const pos = editor.getScrollInfo();
            const result = this.processRegex(subject, ruleText, rulesetPath);
            if (editor.somethingSelected())
                editor.replaceSelection(result.content);
            else
                editor.setValue(result.content);
            editor.scrollTo(0, pos.top);
            new obsidian.Notice(t('EXECUTED_MSG', rulesetPath.split('/').pop() || '', result.count));
        });
    }
}
class ConfirmationModal extends obsidian.Modal {
    constructor(app, title, message, confirmBtnText, onConfirm) {
        super(app);
        this.title = title;
        this.message = message;
        this.confirmBtnText = confirmBtnText;
        this.onConfirm = onConfirm;
    }
    onOpen() {
        const { contentEl } = this;
        this.titleEl.setText(this.title);
        contentEl.createEl("p", { text: this.message });
        const btnContainer = contentEl.createEl("div", { cls: "orp-modal-buttons" });
        new obsidian.ButtonComponent(btnContainer).setButtonText(t('CANCEL')).onClick(() => this.close());
        new obsidian.ButtonComponent(btnContainer).setButtonText(this.confirmBtnText).setWarning().onClick(() => {
            this.onConfirm();
            this.close();
        });
    }
    onClose() { this.contentEl.empty(); }
}
class RegexQuickActionsSettingsTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.showCreationForm = false;
        this.editingRule = null;
        this.tempName = "";
        this.tempPattern = "";
        this.tempFlags = "gm";
        this.tempReplacement = "";
        this.tempIsDefault = false;
        this.plugin = plugin;
    }
    display() {
        const { containerEl } = this;
        containerEl.empty();
        new obsidian.Setting(containerEl)
            .setHeading()
            .setName(t('PLUGIN_SETTINGS_HEADER'));
        containerEl.createEl("p", { text: t('PLUGIN_DESC'), cls: "orp-settings-description" });
        new obsidian.Setting(containerEl)
            .setHeading()
            .setName(t('GENERAL_SECTION_HEADER'));
        new obsidian.Setting(containerEl)
            .setName(t('CONFIRM_FOLDER_ACTION'))
            .setDesc(t('CONFIRM_FOLDER_ACTION_DESC'))
            .addToggle(toggle => toggle
            .setValue(this.plugin.settings.confirmFolderAction)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.confirmFolderAction = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setHeading()
            .setName(t('MANAGE_SECTION_HEADER'));
        new obsidian.Setting(containerEl)
            .setName(t('ADD_QUICK_ACTION'))
            .addButton(btn => btn
            .setButtonText(t('ADD'))
            .setCta()
            .onClick(() => {
            this.resetTempFields();
            this.showCreationForm = !this.showCreationForm;
            this.display();
        }));
        if (this.showCreationForm) {
            const formContainer = containerEl.createEl("div", { cls: "orp-creation-row" });
            this.renderFormFields(formContainer, () => this.handleSave());
        }
        const listWrapper = containerEl.createEl("div", { cls: "orp-saved-list" });
        this.plugin.settings.rules.forEach((name) => __awaiter(this, void 0, void 0, function* () {
            const itemRow = listWrapper.createEl("div", { cls: "orp-saved-rule-item" });
            if (this.editingRule === name) {
                this.renderFormFields(itemRow, () => this.handleUpdate(name), true);
            }
            else {
                let content = "";
                // FIXED: added comment to empty catch block to satisfy no-empty linter rule
                try {
                    content = yield this.plugin.app.vault.adapter.read(this.plugin.pathToRulesets + "/" + name);
                }
                catch ( /* ignore if file doesn't exist */_a) { /* ignore if file doesn't exist */ }
                const { pattern, flags, replacement } = this.parseRuleContent(content);
                const nameWrap = itemRow.createEl("div", { cls: "orp-input-wrap orp-name-field" });
                nameWrap.createEl("small", { text: t('ACTION_NAME'), cls: "orp-label" });
                nameWrap.createEl("div", { text: name, cls: "orp-saved-text-display" });
                const fieldsRow = itemRow.createEl("div", { cls: "orp-fields-row" });
                this.createDisplayField(fieldsRow, t('SEARCH_REGEX'), pattern, "orp-pattern-field");
                this.createDisplayField(fieldsRow, t('FLAGS'), flags, "orp-flags-field");
                this.createDisplayField(fieldsRow, t('REPLACEMENT'), replacement, "orp-replacement-field");
                const actionsWrap = itemRow.createEl("div", { cls: "orp-input-wrap orp-creation-actions" });
                const defaultWrap = actionsWrap.createEl("div", { cls: "orp-default-toggle-wrap" });
                new obsidian.ToggleComponent(defaultWrap)
                    .setValue(this.plugin.settings.defaultRule === name)
                    .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                    this.plugin.settings.defaultRule = value ? name : null;
                    yield this.plugin.saveSettings();
                    this.display();
                }));
                defaultWrap.createSpan({ text: t('SET_AS_DEFAULT'), cls: "orp-toggle-label" });
                const buttons = actionsWrap.createEl("div", { cls: "orp-action-buttons" });
                new obsidian.ButtonComponent(buttons).setButtonText(t('EDIT')).onClick(() => {
                    this.parseContentToFields(name, content);
                    this.editingRule = name;
                    this.showCreationForm = false;
                    this.display();
                });
                new obsidian.ButtonComponent(buttons).setButtonText(t('DELETE')).setWarning().onClick(() => {
                    new ConfirmationModal(this.app, t('DELETE_HEADER'), t('DELETE_CONFIRM', name), t('YES'), () => __awaiter(this, void 0, void 0, function* () {
                        yield this.plugin.deleteRuleset(name);
                        this.display();
                    })).open();
                });
            }
        }));
    }
    createDisplayField(parent, label, val, cls) {
        const wrap = parent.createEl("div", { cls: `orp-input-wrap ${cls}` });
        wrap.createEl("small", { text: label, cls: "orp-label" });
        wrap.createEl("div", { text: val, cls: "orp-saved-text-display" });
    }
    renderFormFields(container, onConfirm, isUpdate = false) {
        const nameWrap = container.createEl("div", { cls: "orp-input-wrap orp-name-field" });
        nameWrap.createEl("small", { text: t('ACTION_NAME'), cls: "orp-label" });
        this.nameInputEl = nameWrap.createEl("input", { type: "text", value: this.tempName, placeholder: t('PLACEHOLDER_NAME'), cls: "orp-input" });
        this.nameInputEl.addEventListener("input", (e) => this.tempName = e.target.value);
        const fieldsRow = container.createEl("div", { cls: "orp-fields-row" });
        this.patternInputEl = this.createInputField(fieldsRow, t('SEARCH_REGEX'), this.tempPattern, t('PLACEHOLDER_SEARCH'), "orp-pattern-field", (v) => this.tempPattern = v);
        this.flagsInputEl = this.createInputField(fieldsRow, t('FLAGS'), this.tempFlags, t('PLACEHOLDER_FLAGS'), "orp-flags-field", (v) => this.tempFlags = v);
        this.createInputField(fieldsRow, t('REPLACEMENT'), this.tempReplacement, t('PLACEHOLDER_REPLACEMENT'), "orp-replacement-field", (v) => this.tempReplacement = v);
        const actionsWrap = container.createEl("div", { cls: "orp-input-wrap orp-creation-actions" });
        const defaultWrap = actionsWrap.createEl("div", { cls: "orp-default-toggle-wrap" });
        const initialToggleValue = isUpdate ? (this.plugin.settings.defaultRule === this.editingRule) : this.tempIsDefault;
        new obsidian.ToggleComponent(defaultWrap)
            .setValue(initialToggleValue)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            if (isUpdate) {
                this.plugin.settings.defaultRule = value ? this.tempName : null;
                yield this.plugin.saveSettings();
            }
            else {
                this.tempIsDefault = value;
            }
        }));
        defaultWrap.createSpan({ text: t('SET_AS_DEFAULT'), cls: "orp-toggle-label" });
        const buttons = actionsWrap.createEl("div", { cls: "orp-action-buttons" });
        new obsidian.ButtonComponent(buttons).setButtonText(isUpdate ? t('SAVE') : t('SAVE')).setCta().onClick(onConfirm);
        new obsidian.ButtonComponent(buttons).setButtonText(t('CANCEL')).onClick(() => {
            this.editingRule = null;
            this.showCreationForm = false;
            this.display();
        });
    }
    createInputField(parent, label, val, ph, cls, onChange) {
        const wrap = parent.createEl("div", { cls: `orp-input-wrap ${cls}` });
        wrap.createEl("small", { text: label, cls: "orp-label" });
        const input = wrap.createEl("input", { type: "text", value: val, placeholder: ph, cls: "orp-input" });
        input.addEventListener("input", (e) => onChange(e.target.value));
        return input;
    }
    triggerFieldError(el) {
        if (!el)
            return;
        el.classList.remove('field-error');
        void el.offsetWidth;
        el.classList.add('field-error');
    }
    validateInputs(isUpdate = false) {
        const trimmedName = this.tempName.trim();
        if (!trimmedName) {
            new obsidian.Notice(t('NAME_EMPTY_ERR'));
            this.triggerFieldError(this.nameInputEl);
            return false;
        }
        const nameExists = this.plugin.settings.rules.some(name => name.toLowerCase() === trimmedName.toLowerCase() && (!isUpdate || name !== this.editingRule));
        if (nameExists) {
            new obsidian.Notice(t('NAME_EXISTS_ERR'));
            this.triggerFieldError(this.nameInputEl);
            return false;
        }
        if (!this.tempPattern.trim()) {
            new obsidian.Notice(t('PATTERN_EMPTY_ERR'));
            this.triggerFieldError(this.patternInputEl);
            return false;
        }
        try {
            new RegExp(this.tempPattern, this.tempFlags || 'gm');
        }
        catch (e) {
            const errorMsg = e instanceof Error ? e.message.toLowerCase() : String(e).toLowerCase();
            const isFlagError = errorMsg.includes("flag") || /[^gimsuy]/.test(this.tempFlags);
            if (isFlagError) {
                new obsidian.Notice(t('FLAGS_INVALID_ERR'));
                this.triggerFieldError(this.flagsInputEl);
            }
            else {
                new obsidian.Notice(t('REGEX_INVALID_ERR'));
                this.triggerFieldError(this.patternInputEl);
            }
            return false;
        }
        return true;
    }
    handleSave() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.validateInputs(false))
                return;
            const content = `"${this.tempPattern}"${this.tempFlags}\n->\n"${this.tempReplacement}"`;
            yield this.plugin.createRuleset(this.tempName, content);
            if (this.tempIsDefault) {
                this.plugin.settings.defaultRule = this.tempName;
                yield this.plugin.saveSettings();
            }
            this.showCreationForm = false;
            this.display();
        });
    }
    handleUpdate(oldName) {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.validateInputs(true))
                return;
            const content = `"${this.tempPattern}"${this.tempFlags}\n->\n"${this.tempReplacement}"`;
            yield this.plugin.updateRuleset(oldName, this.tempName, content);
            this.editingRule = null;
            this.display();
        });
    }
    parseRuleContent(content) {
        const parser = /^"(.+?)"([a-z]*?)(?:\r\n|\r|\n)?->(?:\r\n|\r|\n)?"(.*?)"([a-z]*?)$/mus;
        const match = parser.exec(content);
        return {
            pattern: match ? match[1] : "",
            flags: match ? match[2] : "gm",
            replacement: match ? match[3] : ""
        };
    }
    parseContentToFields(name, content) {
        const data = this.parseRuleContent(content);
        this.tempName = name;
        this.tempPattern = data.pattern;
        this.tempFlags = data.flags;
        this.tempReplacement = data.replacement;
    }
    resetTempFields() {
        this.tempName = "";
        this.tempPattern = "";
        this.tempFlags = "gm";
        this.tempReplacement = "";
        this.tempIsDefault = false;
        this.editingRule = null;
    }
}

module.exports = RegexQuickActions;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsImxvY2FsZXMvZW4udHMiLCJsb2NhbGVzL3J1LnRzIiwiaTE4bi50cyIsIm1haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCwgSXRlcmF0b3IgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXNEZWNvcmF0ZShjdG9yLCBkZXNjcmlwdG9ySW4sIGRlY29yYXRvcnMsIGNvbnRleHRJbiwgaW5pdGlhbGl6ZXJzLCBleHRyYUluaXRpYWxpemVycykge1xyXG4gICAgZnVuY3Rpb24gYWNjZXB0KGYpIHsgaWYgKGYgIT09IHZvaWQgMCAmJiB0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIik7IHJldHVybiBmOyB9XHJcbiAgICB2YXIga2luZCA9IGNvbnRleHRJbi5raW5kLCBrZXkgPSBraW5kID09PSBcImdldHRlclwiID8gXCJnZXRcIiA6IGtpbmQgPT09IFwic2V0dGVyXCIgPyBcInNldFwiIDogXCJ2YWx1ZVwiO1xyXG4gICAgdmFyIHRhcmdldCA9ICFkZXNjcmlwdG9ySW4gJiYgY3RvciA/IGNvbnRleHRJbltcInN0YXRpY1wiXSA/IGN0b3IgOiBjdG9yLnByb3RvdHlwZSA6IG51bGw7XHJcbiAgICB2YXIgZGVzY3JpcHRvciA9IGRlc2NyaXB0b3JJbiB8fCAodGFyZ2V0ID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGNvbnRleHRJbi5uYW1lKSA6IHt9KTtcclxuICAgIHZhciBfLCBkb25lID0gZmFsc2U7XHJcbiAgICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4pIGNvbnRleHRbcF0gPSBwID09PSBcImFjY2Vzc1wiID8ge30gOiBjb250ZXh0SW5bcF07XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4uYWNjZXNzKSBjb250ZXh0LmFjY2Vzc1twXSA9IGNvbnRleHRJbi5hY2Nlc3NbcF07XHJcbiAgICAgICAgY29udGV4dC5hZGRJbml0aWFsaXplciA9IGZ1bmN0aW9uIChmKSB7IGlmIChkb25lKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCBpbml0aWFsaXplcnMgYWZ0ZXIgZGVjb3JhdGlvbiBoYXMgY29tcGxldGVkXCIpOyBleHRyYUluaXRpYWxpemVycy5wdXNoKGFjY2VwdChmIHx8IG51bGwpKTsgfTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gKDAsIGRlY29yYXRvcnNbaV0pKGtpbmQgPT09IFwiYWNjZXNzb3JcIiA/IHsgZ2V0OiBkZXNjcmlwdG9yLmdldCwgc2V0OiBkZXNjcmlwdG9yLnNldCB9IDogZGVzY3JpcHRvcltrZXldLCBjb250ZXh0KTtcclxuICAgICAgICBpZiAoa2luZCA9PT0gXCJhY2Nlc3NvclwiKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgdHlwZW9mIHJlc3VsdCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmdldCkpIGRlc2NyaXB0b3IuZ2V0ID0gXztcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LnNldCkpIGRlc2NyaXB0b3Iuc2V0ID0gXztcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmluaXQpKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoXyA9IGFjY2VwdChyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgIGlmIChraW5kID09PSBcImZpZWxkXCIpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xyXG4gICAgICAgICAgICBlbHNlIGRlc2NyaXB0b3Jba2V5XSA9IF87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRhcmdldCkgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgY29udGV4dEluLm5hbWUsIGRlc2NyaXB0b3IpO1xyXG4gICAgZG9uZSA9IHRydWU7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19ydW5Jbml0aWFsaXplcnModGhpc0FyZywgaW5pdGlhbGl6ZXJzLCB2YWx1ZSkge1xyXG4gICAgdmFyIHVzZVZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDI7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluaXRpYWxpemVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhbHVlID0gdXNlVmFsdWUgPyBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnLCB2YWx1ZSkgOiBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VWYWx1ZSA/IHZhbHVlIDogdm9pZCAwO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcHJvcEtleSh4KSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHggPT09IFwic3ltYm9sXCIgPyB4IDogXCJcIi5jb25jYXQoeCk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zZXRGdW5jdGlvbk5hbWUoZiwgbmFtZSwgcHJlZml4KSB7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3ltYm9sXCIpIG5hbWUgPSBuYW1lLmRlc2NyaXB0aW9uID8gXCJbXCIuY29uY2F0KG5hbWUuZGVzY3JpcHRpb24sIFwiXVwiKSA6IFwiXCI7XHJcbiAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGYsIFwibmFtZVwiLCB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHByZWZpeCA/IFwiXCIuY29uY2F0KHByZWZpeCwgXCIgXCIsIG5hbWUpIDogbmFtZSB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGcgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEl0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpO1xyXG4gICAgcmV0dXJuIGcubmV4dCA9IHZlcmIoMCksIGdbXCJ0aHJvd1wiXSA9IHZlcmIoMSksIGdbXCJyZXR1cm5cIl0gPSB2ZXJiKDIpLCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XHJcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xyXG4gICAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IE9iamVjdC5jcmVhdGUoKHR5cGVvZiBBc3luY0l0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBBc3luY0l0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpLCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIsIGF3YWl0UmV0dXJuKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gYXdhaXRSZXR1cm4oZikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGYsIHJlamVjdCk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpZiAoZ1tuXSkgeyBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyBpZiAoZikgaVtuXSA9IGYoaVtuXSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IGZhbHNlIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbnZhciBvd25LZXlzID0gZnVuY3Rpb24obykge1xyXG4gICAgb3duS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgdmFyIGFyID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgayBpbiBvKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspKSBhclthci5sZW5ndGhdID0gaztcclxuICAgICAgICByZXR1cm4gYXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIG93bktleXMobyk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayA9IG93bktleXMobW9kKSwgaSA9IDA7IGkgPCBrLmxlbmd0aDsgaSsrKSBpZiAoa1tpXSAhPT0gXCJkZWZhdWx0XCIpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwga1tpXSk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XHJcbiAgICBpZiAocmVjZWl2ZXIgPT09IG51bGwgfHwgKHR5cGVvZiByZWNlaXZlciAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcmVjZWl2ZXIgIT09IFwiZnVuY3Rpb25cIikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlICdpbicgb3BlcmF0b3Igb24gbm9uLW9iamVjdFwiKTtcclxuICAgIHJldHVybiB0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyID09PSBzdGF0ZSA6IHN0YXRlLmhhcyhyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZShlbnYsIHZhbHVlLCBhc3luYykge1xyXG4gICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDApIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkLlwiKTtcclxuICAgICAgICB2YXIgZGlzcG9zZSwgaW5uZXI7XHJcbiAgICAgICAgaWYgKGFzeW5jKSB7XHJcbiAgICAgICAgICAgIGlmICghU3ltYm9sLmFzeW5jRGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0Rpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgICAgICAgICBkaXNwb3NlID0gdmFsdWVbU3ltYm9sLmFzeW5jRGlzcG9zZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkaXNwb3NlID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgaWYgKCFTeW1ib2wuZGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5kaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5kaXNwb3NlXTtcclxuICAgICAgICAgICAgaWYgKGFzeW5jKSBpbm5lciA9IGRpc3Bvc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgZGlzcG9zZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IG5vdCBkaXNwb3NhYmxlLlwiKTtcclxuICAgICAgICBpZiAoaW5uZXIpIGRpc3Bvc2UgPSBmdW5jdGlvbigpIHsgdHJ5IHsgaW5uZXIuY2FsbCh0aGlzKTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7IH0gfTtcclxuICAgICAgICBlbnYuc3RhY2sucHVzaCh7IHZhbHVlOiB2YWx1ZSwgZGlzcG9zZTogZGlzcG9zZSwgYXN5bmM6IGFzeW5jIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXN5bmMpIHtcclxuICAgICAgICBlbnYuc3RhY2sucHVzaCh7IGFzeW5jOiB0cnVlIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG5cclxufVxyXG5cclxudmFyIF9TdXBwcmVzc2VkRXJyb3IgPSB0eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcclxuICAgIHZhciBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIGUubmFtZSA9IFwiU3VwcHJlc3NlZEVycm9yXCIsIGUuZXJyb3IgPSBlcnJvciwgZS5zdXBwcmVzc2VkID0gc3VwcHJlc3NlZCwgZTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2Rpc3Bvc2VSZXNvdXJjZXMoZW52KSB7XHJcbiAgICBmdW5jdGlvbiBmYWlsKGUpIHtcclxuICAgICAgICBlbnYuZXJyb3IgPSBlbnYuaGFzRXJyb3IgPyBuZXcgX1N1cHByZXNzZWRFcnJvcihlLCBlbnYuZXJyb3IsIFwiQW4gZXJyb3Igd2FzIHN1cHByZXNzZWQgZHVyaW5nIGRpc3Bvc2FsLlwiKSA6IGU7XHJcbiAgICAgICAgZW52Lmhhc0Vycm9yID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHZhciByLCBzID0gMDtcclxuICAgIGZ1bmN0aW9uIG5leHQoKSB7XHJcbiAgICAgICAgd2hpbGUgKHIgPSBlbnYuc3RhY2sucG9wKCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmICghci5hc3luYyAmJiBzID09PSAxKSByZXR1cm4gcyA9IDAsIGVudi5zdGFjay5wdXNoKHIpLCBQcm9taXNlLnJlc29sdmUoKS50aGVuKG5leHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHIuZGlzcG9zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByLmRpc3Bvc2UuY2FsbChyLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoci5hc3luYykgcmV0dXJuIHMgfD0gMiwgUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCkudGhlbihuZXh0LCBmdW5jdGlvbihlKSB7IGZhaWwoZSk7IHJldHVybiBuZXh0KCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBzIHw9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGZhaWwoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHMgPT09IDEpIHJldHVybiBlbnYuaGFzRXJyb3IgPyBQcm9taXNlLnJlamVjdChlbnYuZXJyb3IpIDogUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgaWYgKGVudi5oYXNFcnJvcikgdGhyb3cgZW52LmVycm9yO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5leHQoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uKHBhdGgsIHByZXNlcnZlSnN4KSB7XHJcbiAgICBpZiAodHlwZW9mIHBhdGggPT09IFwic3RyaW5nXCIgJiYgL15cXC5cXC4/XFwvLy50ZXN0KHBhdGgpKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGgucmVwbGFjZSgvXFwuKHRzeCkkfCgoPzpcXC5kKT8pKCg/OlxcLlteLi9dKz8pPylcXC4oW2NtXT8pdHMkL2ksIGZ1bmN0aW9uIChtLCB0c3gsIGQsIGV4dCwgY20pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzeCA/IHByZXNlcnZlSnN4ID8gXCIuanN4XCIgOiBcIi5qc1wiIDogZCAmJiAoIWV4dCB8fCAhY20pID8gbSA6IChkICsgZXh0ICsgXCIuXCIgKyBjbS50b0xvd2VyQ2FzZSgpICsgXCJqc1wiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBwYXRoO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBfX2V4dGVuZHM6IF9fZXh0ZW5kcyxcclxuICAgIF9fYXNzaWduOiBfX2Fzc2lnbixcclxuICAgIF9fcmVzdDogX19yZXN0LFxyXG4gICAgX19kZWNvcmF0ZTogX19kZWNvcmF0ZSxcclxuICAgIF9fcGFyYW06IF9fcGFyYW0sXHJcbiAgICBfX2VzRGVjb3JhdGU6IF9fZXNEZWNvcmF0ZSxcclxuICAgIF9fcnVuSW5pdGlhbGl6ZXJzOiBfX3J1bkluaXRpYWxpemVycyxcclxuICAgIF9fcHJvcEtleTogX19wcm9wS2V5LFxyXG4gICAgX19zZXRGdW5jdGlvbk5hbWU6IF9fc2V0RnVuY3Rpb25OYW1lLFxyXG4gICAgX19tZXRhZGF0YTogX19tZXRhZGF0YSxcclxuICAgIF9fYXdhaXRlcjogX19hd2FpdGVyLFxyXG4gICAgX19nZW5lcmF0b3I6IF9fZ2VuZXJhdG9yLFxyXG4gICAgX19jcmVhdGVCaW5kaW5nOiBfX2NyZWF0ZUJpbmRpbmcsXHJcbiAgICBfX2V4cG9ydFN0YXI6IF9fZXhwb3J0U3RhcixcclxuICAgIF9fdmFsdWVzOiBfX3ZhbHVlcyxcclxuICAgIF9fcmVhZDogX19yZWFkLFxyXG4gICAgX19zcHJlYWQ6IF9fc3ByZWFkLFxyXG4gICAgX19zcHJlYWRBcnJheXM6IF9fc3ByZWFkQXJyYXlzLFxyXG4gICAgX19zcHJlYWRBcnJheTogX19zcHJlYWRBcnJheSxcclxuICAgIF9fYXdhaXQ6IF9fYXdhaXQsXHJcbiAgICBfX2FzeW5jR2VuZXJhdG9yOiBfX2FzeW5jR2VuZXJhdG9yLFxyXG4gICAgX19hc3luY0RlbGVnYXRvcjogX19hc3luY0RlbGVnYXRvcixcclxuICAgIF9fYXN5bmNWYWx1ZXM6IF9fYXN5bmNWYWx1ZXMsXHJcbiAgICBfX21ha2VUZW1wbGF0ZU9iamVjdDogX19tYWtlVGVtcGxhdGVPYmplY3QsXHJcbiAgICBfX2ltcG9ydFN0YXI6IF9faW1wb3J0U3RhcixcclxuICAgIF9faW1wb3J0RGVmYXVsdDogX19pbXBvcnREZWZhdWx0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRTZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkSW46IF9fY2xhc3NQcml2YXRlRmllbGRJbixcclxuICAgIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlOiBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZSxcclxuICAgIF9fZGlzcG9zZVJlc291cmNlczogX19kaXNwb3NlUmVzb3VyY2VzLFxyXG4gICAgX19yZXdyaXRlUmVsYXRpdmVJbXBvcnRFeHRlbnNpb246IF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uLFxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCB7XHJcbiAgICAvKiBTZWN0aW9uIGhlYWRlcnMgKi9cclxuXHJcbiAgICBQTFVHSU5fU0VUVElOR1NfSEVBREVSOiBcIlJlZ2V4IFF1aWNrIEFjdGlvbnMgc2V0dGluZ3NcIixcclxuICAgIE1BTkFHRV9TRUNUSU9OX0hFQURFUjogXCJNYW5hZ2UgcXVpY2sgYWN0aW9uc1wiLFxyXG4gICAgR0VORVJBTF9TRUNUSU9OX0hFQURFUjogXCJHZW5lcmFsXCIsXHJcbiAgICBQTFVHSU5fREVTQzogXCJUaGlzIHBsdWdpbiBhbGxvd3MgeW91IHRvIGNyZWF0ZSBhbmQgcXVpY2tseSBhcHBseSByZWdleCBhY3Rpb25zIHZpYTogdGhlIGNvbW1hbmQgcGFsZXR0ZSAoYW55IGFjdGlvbiksIHRoZSBmaWxlIGV4cGxvcmVyIGNvbnRleHQgbWVudSAoZGVmYXVsdCBhY3Rpb24pLCB0aGUgZmlsZSBjb250ZXh0IG1lbnUgKGRlZmF1bHQgYWN0aW9uKS4gRXZlcnkgc2F2ZWQgYWN0aW9uIGJlY29tZXMgYSBwYWxldHRlIGNvbW1hbmQsIHdoaWNoIGVuc3VyZXMgYXV0b21hdGlzYXRpb24gcG9zc2liaWxpdGllcy5cIixcclxuICAgIFxyXG4gICAgLyogR2VuZXJpYyBidXR0b25zICovXHJcbiAgICBcclxuICAgIEFERDogXCJBZGRcIixcclxuICAgIFNBVkU6IFwiU2F2ZVwiLFxyXG4gICAgQ0FOQ0VMOiBcIkNhbmNlbFwiLFxyXG4gICAgWUVTOiBcIlllc1wiLFxyXG4gICAgRURJVDogXCJFZGl0XCIsXHJcbiAgICBERUxFVEU6IFwiRGVsZXRlXCIsXHJcbiAgICBcclxuICAgIC8qIERpYWxvZyB0ZXh0cyAqL1xyXG5cclxuICAgIERFTEVURV9IRUFERVI6IFwiRGVsZXRlIHF1aWNrIGFjdGlvblwiLFxyXG4gICAgREVMRVRFX0NPTkZJUk06IFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBxdWljayBhY3Rpb24gXFxcInt9XFxcIj9cIixcclxuICAgIEZPTERFUl9BQ1RJT05fQ09ORklSTV9USVRMRTogXCJSdW4gcXVpY2sgYWN0aW9uIG9uIGZvbGRlclwiLFxyXG4gICAgRk9MREVSX0FDVElPTl9DT05GSVJNX01TRzogXCJBcmUgeW91IHN1cmUgdGhhdCB5b3Ugd2FudCB0byBydW4gZGVmYXVsdCBxdWljayBhY3Rpb24gb24gZXZlcnkgZmlsZSBpbnNpZGUgdGhpcyBmb2xkZXI/IFRoaXMgYWN0aW9uIGlzIGlycmV2ZXJzaWJsZS5cIixcclxuXHJcbiAgICAvKiBEZXNjcmlwdGlvbnMgKi9cclxuXHJcbiAgICBQTEFDRUhPTERFUl9OQU1FOiBcIlVzZWQgdG8gY2FsbCBxdWljayBhY3Rpb25zIHZpYSBjb21tYW5kIHBhbGV0dGVcIixcclxuICAgIFBMQUNFSE9MREVSX1NFQVJDSDogXCJTZWFyY2ggcGF0dGVyblwiLFxyXG4gICAgUExBQ0VIT0xERVJfRkxBR1M6IFwiZS5nLiBnbVwiLFxyXG4gICAgUExBQ0VIT0xERVJfUkVQTEFDRU1FTlQ6IFwiUmVwbGFjZW1lbnQgdGV4dFwiLFxyXG4gICAgQUREX1FVSUNLX0FDVElPTjogXCJOZXcgcXVpY2sgYWN0aW9uXCIsXHJcbiAgICBBQ1RJT05fTkFNRTogXCJRdWljayBhY3Rpb24gbmFtZVwiLFxyXG4gICAgU0VBUkNIX1JFR0VYOiBcIlJlZ2V4IHJ1bGVcIixcclxuICAgIEZMQUdTOiBcIkZsYWdzXCIsXHJcbiAgICBSRVBMQUNFTUVOVDogXCJSZXBsYWNlbWVudFwiLFxyXG4gICAgU0VUX0FTX0RFRkFVTFQ6IFwiU2V0IGFzIGRlZmF1bHQgcXVpY2sgYWN0aW9uXCIsXHJcbiAgICBSVU5fREVGQVVMVDogXCJSdW4gZGVmYXVsdCBxdWljayBhY3Rpb25cIixcclxuICAgIFJVTl9ERUZBVUxUX09OX0ZPTERFUjogXCJSdW4gZGVmYXVsdCBxdWljayBhY3Rpb24gb24gZm9sZGVyXCIsXHJcbiAgICBDT05GSVJNX0ZPTERFUl9BQ1RJT046IFwiQ29uZmlybWF0aW9uIGZvciBxdWljayBhY3Rpb24gb24gZm9sZGVyXCIsXHJcbiAgICBDT05GSVJNX0ZPTERFUl9BQ1RJT05fREVTQzogXCJTaG93IGEgY29uZmlybWF0aW9uIGRpYWxvZyBiZWZvcmUgcnVubmluZyBxdWljayBhY3Rpb24gb24gZXZlcnkgZmlsZSBpbnNpZGUgYSBjaG9zZW4gZm9sZGVyLlwiLFxyXG5cclxuICAgIC8qIEVycm9ycyBhbmQgbWVzc2FnZXMgKi9cclxuXHJcbiAgICBOQU1FX0VNUFRZX0VSUjogXCJFcnJvcjogUXVpY2sgYWN0aW9uIG5hbWUgY2Fubm90IGJlIGVtcHR5IVwiLFxyXG4gICAgTkFNRV9FWElTVFNfRVJSOiBcIkVycm9yOiBBbiBhY3Rpb24gd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHMhXCIsXHJcbiAgICBQQVRURVJOX0VNUFRZX0VSUjogXCJFcnJvcjogUmVnZXggcGF0dGVybiBjYW5ub3QgYmUgZW1wdHkhXCIsXHJcbiAgICBGTEFHU19JTlZBTElEX0VSUjogXCJFcnJvcjogSW52YWxpZCByZWdleCBmbGFncyBwcm92aWRlZCFcIixcclxuICAgIFJFR0VYX0lOVkFMSURfRVJSOiBcIkVycm9yOiBJbnZhbGlkIHJlZ3VsYXIgZXhwcmVzc2lvbiBzeW50YXghXCIsXHJcbiAgICBOT1RfRk9VTkRfRVJSOiBcIiBub3QgZm91bmQhXCIsXHJcbiAgICBFWEVDVVRFRF9NU0c6IFwiRXhlY3V0ZWQgJ3t9JyB3aXRoIHt9IHJlcGxhY2VtZW50cy5cIlxyXG59OyIsImV4cG9ydCBkZWZhdWx0IHtcclxuICAgIC8qIFNlY3Rpb24gaGVhZGVycyAqL1xyXG5cclxuICAgIFBMVUdJTl9TRVRUSU5HU19IRUFERVI6IFwi0J3QsNGB0YLRgNC+0LnQutC4IFJlZ2V4IFF1aWNrIEFjdGlvbnNcIixcclxuICAgIE1BTkFHRV9TRUNUSU9OX0hFQURFUjogXCLQo9C/0YDQsNCy0LvQtdC90LjQtSDQsdGL0YHRgtGA0YvQvNC4INC60L7QvNCw0L3QtNCw0LzQuFwiLFxyXG4gICAgR0VORVJBTF9TRUNUSU9OX0hFQURFUjogXCLQntGB0L3QvtCy0L3Ri9C1XCIsXHJcbiAgICBQTFVHSU5fREVTQzogXCLQlNCw0L3QvdGL0Lkg0L/Qu9Cw0LPQuNC9INC/0L7Qt9Cy0L7Qu9GP0LXRgiDRgdC+0LfQtNCw0LLQsNGC0Ywg0Lgg0LHRi9GB0YLRgNC+INC/0YDQuNC80LXQvdGP0YLRjCDQutC+0LzQsNC90LTRiyByZWdleCDRh9C10YDQtdC3OiDQv9Cw0LvQuNGC0YDRgyDQutC+0LzQsNC90LQgKNC70Y7QsdGL0LUg0LrQvtC80LDQvdC00YspLCDQutC+0L3RgtC10LrRgdGC0L3QvtC1INC80LXQvdGOINGE0LDQudC70LAg0LIg0L/RgNC+0LLQvtC00L3QuNC60LUgKNC60L7QvNCw0L3QtNCwINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOKSwg0LrQvtC90YLQtdC60YHRgtC90L7QtSDQvNC10L3RjiDQv9Cw0L/QutC4INCyINC/0YDQvtCy0L7QtNC90LjQutC1ICjQutC+0LzQsNC90LTQsCDQv9C+INGD0LzQvtC70YfQsNC90LjRjiksINC60L7QvdGC0LXQutGB0YLQvdC+0LUg0LzQtdC90Y4g0LfQsNC80LXRgtC60Lgg0LIg0YDQtdC00LDQutGC0L7RgNC1ICjQutC+0LzQsNC90LTQsCDQv9C+INGD0LzQvtC70YfQsNC90LjRjikuINCa0LDQttC00LDRjyDRgdC+0YXRgNCw0L3RkdC90L3QsNGPINC60L7QvNCw0L3QtNCwINC/0L7Rj9Cy0LvRj9C10YLRgdGPINCyINC/0LDQu9C40YLRgNC1INC60L7QvNCw0L3QtCwg0YfRgtC+INC/0L7Qt9Cy0L7Qu9GP0LXRgiDQuNGB0L/QvtC70YzQt9C+0LLQsNGC0Ywg0L/Qu9Cw0LPQuNC9INC00LvRjyDQsNCy0YLQvtC80LDRgtC40LfQsNGG0LjQuC5cIixcclxuICAgIFxyXG4gICAgLyogR2VuZXJpYyBidXR0b25zICovXHJcbiAgICBcclxuICAgIEFERDogXCLQlNC+0LHQsNCy0LjRgtGMXCIsXHJcbiAgICBTQVZFOiBcItCh0L7RhdGA0LDQvdC40YLRjFwiLFxyXG4gICAgQ0FOQ0VMOiBcItCe0YLQvNC10L3QuNGC0YxcIixcclxuICAgIFlFUzogXCLQlNCwXCIsXHJcbiAgICBFRElUOiBcItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMXCIsXHJcbiAgICBERUxFVEU6IFwi0KPQtNCw0LvQuNGC0YxcIixcclxuICAgIFxyXG4gICAgLyogRGlhbG9nIHRleHRzICovXHJcblxyXG4gICAgREVMRVRFX0hFQURFUjogXCLQo9C00LDQu9C40YLRjCDQsdGL0YHRgtGA0YPRjiDQutC+0LzQsNC90LTRg1wiLFxyXG4gICAgREVMRVRFX0NPTkZJUk06IFwi0JLRiyDRg9Cy0LXRgNC10L3Riywg0YfRgtC+INGF0L7RgtC40YLQtSDRg9C00LDQu9C40YLRjCDQsdGL0YHRgtGA0YPRjiDQutC+0LzQsNC90LTRgyBcXFwie31cXFwiP1wiLFxyXG4gICAgRk9MREVSX0FDVElPTl9DT05GSVJNX1RJVExFOiBcItCf0YDQuNC80LXQvdC40YLRjCDQsdGL0YHRgtGA0YPRjiDQutC+0LzQsNC90LTRgyDQuiDQv9Cw0L/QutC1XCIsXHJcbiAgICBGT0xERVJfQUNUSU9OX0NPTkZJUk1fTVNHOiBcItCS0Ysg0YPQstC10YDQtdC90YssINGH0YLQviDRhdC+0YLQuNGC0LUg0L/RgNC40LzQtdC90LjRgtGMINCx0YvRgdGC0YDRg9GOINC60L7QvNCw0L3QtNGDINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOINC6INC60LDQttC00L7QvNGDINGE0LDQudC70YMg0LLQvdGD0YLRgNC4INGN0YLQvtC5INC/0LDQv9C60Lg/INCt0YLQviDQtNC10LnRgdGC0LLQuNC1INC90LXQu9GM0LfRjyDQvtGC0LzQtdC90LjRgtGMLlwiLFxyXG5cclxuICAgIC8qIERlc2NyaXB0aW9ucyAqL1xyXG5cclxuICAgIFBMQUNFSE9MREVSX05BTUU6IFwi0JjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPINC00LvRjyDQstGL0LfQvtCy0LAg0LHRi9GB0YLRgNC+0Lkg0LrQvtC80LDQvdC00Ysg0YfQtdGA0LXQtyDQv9Cw0LvQuNGC0YDRgyDQutC+0LzQsNC90LRcIixcclxuICAgIFBMQUNFSE9MREVSX1NFQVJDSDogXCLQn9Cw0YLRgtC10YDQvSDQtNC70Y8g0L/QvtC40YHQutCwXCIsXHJcbiAgICBQTEFDRUhPTERFUl9GTEFHUzogXCLQvdCw0L/RgC4gZ21cIixcclxuICAgIFBMQUNFSE9MREVSX1JFUExBQ0VNRU5UOiBcItCf0LDRgtGC0LXRgNC9INC00LvRjyDQt9Cw0LzQtdC90YtcIixcclxuICAgIEFERF9RVUlDS19BQ1RJT046IFwi0J3QvtCy0LDRjyDQsdGL0YHRgtGA0LDRjyDQutC+0LzQsNC90LTQsFwiLFxyXG4gICAgQUNUSU9OX05BTUU6IFwi0J3QsNC30LLQsNC90LjQtSDQsdGL0YHRgtGA0L7QuSDQutC+0LzQsNC90LTRi1wiLFxyXG4gICAgU0VBUkNIX1JFR0VYOiBcItCf0YDQsNCy0LjQu9C+IHJlZ2V4XCIsXHJcbiAgICBGTEFHUzogXCLQpNC70LDQs9C4XCIsXHJcbiAgICBSRVBMQUNFTUVOVDogXCLQl9Cw0LzQtdC90LBcIixcclxuICAgIFNFVF9BU19ERUZBVUxUOiBcItCj0YHRgtCw0L3QvtCy0LjRgtGMINC60LDQuiDQsdGL0YHRgtGA0YPRjiDQutC+0LzQsNC90LTRgyDQv9C+INGD0LzQvtC70YfQsNC90LjRjlwiLFxyXG4gICAgUlVOX0RFRkFVTFQ6IFwi0J/RgNC40LzQtdC90LjRgtGMINCx0YvRgdGC0YDRg9GOINC60L7QvNCw0L3QtNGDINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOXCIsXHJcbiAgICBSVU5fREVGQVVMVF9PTl9GT0xERVI6IFwi0J/RgNC40LzQtdC90LjRgtGMINCx0YvRgdGC0YDRg9GOINC60L7QvNCw0L3QtNGDINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOINC6INC/0LDQv9C60LVcIixcclxuICAgIENPTkZJUk1fRk9MREVSX0FDVElPTjogXCLQn9C+0LTRgtCy0LXRgNC20LTQtdC90LjQtSDQv9C10YDQtdC0INC/0YDQuNC80LXQvdC10L3QuNC10Lwg0LHRi9GB0YLRgNC+0Lkg0LrQvtC80LDQvdC00Ysg0Log0L/QsNC/0LrQtVwiLFxyXG4gICAgQ09ORklSTV9GT0xERVJfQUNUSU9OX0RFU0M6IFwi0J/QvtC60LDQt9GL0LLQsNGC0Ywg0LTQuNCw0LvQvtCzINC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPINC/0LXRgNC10LQg0L/RgNC40LzQtdC90LXQvdC40LXQvCDQsdGL0YHRgtGA0L7QuSDQutC+0LzQsNC90LTRiyDQuiDQutCw0LbQtNC+0LzRgyDRhNCw0LnQu9GDINCyINCy0YvQsdGA0LDQvdC90L7QuSDQv9Cw0L/QutC1LlwiLFxyXG5cclxuICAgIC8qIEVycm9ycyBhbmQgbWVzc2FnZXMgKi9cclxuXHJcbiAgICBOQU1FX0VNUFRZX0VSUjogXCLQntGI0LjQsdC60LA6INCY0LzRjyDQsdGL0YHRgtGA0L7QuSDQutC+0LzQsNC90LTRiyDQvdC1INC80L7QttC10YIg0LHRi9GC0Ywg0L/Rg9GB0YLRi9C8IVwiLFxyXG4gICAgTkFNRV9FWElTVFNfRVJSOiBcItCe0YjQuNCx0LrQsDog0JrQvtC80LDQvdC00LAg0YEg0YLQsNC60LjQvCDQttC1INC40LzQtdC90LXQvCDRg9C20LUg0YHRg9GJ0LXRgdGC0LLRg9C10YIhXCIsXHJcbiAgICBQQVRURVJOX0VNUFRZX0VSUjogXCLQntGI0LjQsdC60LA6INCf0LDRgtGC0LXRgNC9IHJlZ2V4INC90LUg0LzQvtC20LXRgiDQsdGL0YLRjCDQv9GD0YHRgtGL0LwhXCIsXHJcbiAgICBGTEFHU19JTlZBTElEX0VSUjogXCLQntGI0LjQsdC60LA6INCj0LrQsNC30LDQvdGLINC90LXQutC+0YDRgNC10LrRgtC90YvQtSDRhNC70LDQs9C4IHJlZ2V4IVwiLFxyXG4gICAgUkVHRVhfSU5WQUxJRF9FUlI6IFwi0J7RiNC40LHQutCwOiDQndC10LrQvtGA0YDQtdC60YLQvdGL0Lkg0YHQuNC90YLQsNC60YHQuNGBINGA0LXQs9GD0LvRj9GA0L3QvtCz0L4g0LLRi9GA0LDQttC10L3QuNGPIVwiLFxyXG4gICAgTk9UX0ZPVU5EX0VSUjogXCIg0L3QtSDQvdCw0LnQtNC10L3QviFcIixcclxuICAgIEVYRUNVVEVEX01TRzogXCLQmtC+0LzQsNC90LTQsCAne30nINC/0YDQuNC80LXQvdC10L3QsCDRgSB7fSDQt9Cw0LzQtdC90LDQvNC4LlwiXHJcbn07IiwiaW1wb3J0IHsgbW9tZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgZW4gZnJvbSAnLi9sb2NhbGVzL2VuJztcclxuaW1wb3J0IHJ1IGZyb20gJy4vbG9jYWxlcy9ydSc7XHJcblxyXG4vLyBEZWZpbmUgYSB0eXBlIGJhc2VkIG9uIHRoZSBzdHJ1Y3R1cmUgb2YgeW91ciBkZWZhdWx0IGxhbmd1YWdlIGZpbGVcclxudHlwZSBMb2NhbGVNZXNzYWdlcyA9IHR5cGVvZiBlbjtcclxuXHJcbmNvbnN0IE1FU1NBR0VTOiBSZWNvcmQ8c3RyaW5nLCBMb2NhbGVNZXNzYWdlcz4gPSB7XHJcbiAgICBlbjogZW4sXHJcbiAgICBydTogcnUsXHJcbn07XHJcblxyXG5jb25zdCBsb2NhbGUgPSBtb21lbnQubG9jYWxlKCk7XHJcblxyXG4vKipcclxuICogVHJhbnNsYXRlcyBhIGtleSBpbnRvIHRoZSBjdXJyZW50IGxvY2FsZSBzdHJpbmcuXHJcbiAqIEBwYXJhbSBrZXkgLSBBIHZhbGlkIGtleSBmcm9tIHRoZSBsb2NhbGUgZmlsZXNcclxuICogQHBhcmFtIGFyZ3MgLSBWYWx1ZXMgdG8gcmVwbGFjZSAne30nIHBsYWNlaG9sZGVycyBpbiB0aGUgc3RyaW5nXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgdCA9IChrZXk6IGtleW9mIExvY2FsZU1lc3NhZ2VzLCAuLi5hcmdzOiAoc3RyaW5nIHwgbnVtYmVyKVtdKTogc3RyaW5nID0+IHtcclxuICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IGxvY2FsZSBleGlzdHMgaW4gb3VyIE1FU1NBR0VTLCBvdGhlcndpc2UgZmFsbGJhY2sgdG8gRW5nbGlzaFxyXG4gICAgY29uc3QgbGFuZyA9IE1FU1NBR0VTW2xvY2FsZV0gPyBsb2NhbGUgOiAnZW4nO1xyXG4gICAgbGV0IHRleHQ6IHN0cmluZyA9IE1FU1NBR0VTW2xhbmddW2tleV0gfHwgTUVTU0FHRVNbJ2VuJ11ba2V5XTtcclxuICAgIFxyXG4gICAgYXJncy5mb3JFYWNoKGFyZyA9PiB7XHJcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgne30nLCBTdHJpbmcoYXJnKSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHRleHQ7XHJcbn07IiwiaW1wb3J0IHsgQXBwLCBCdXR0b25Db21wb25lbnQsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBNZW51LCBURmlsZSwgVEZvbGRlciwgVEFic3RyYWN0RmlsZSwgVG9nZ2xlQ29tcG9uZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyB0IH0gZnJvbSAnLi9pMThuJztcclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgdG8gYWNjZXNzIGludGVybmFsIE9ic2lkaWFuIGNvbW1hbmQgcmVnaXN0cnlcclxuICovXHJcbmludGVyZmFjZSBDb21tYW5kQXBwIGV4dGVuZHMgQXBwIHtcclxuICAgIGNvbW1hbmRzOiB7XHJcbiAgICAgICAgcmVtb3ZlQ29tbWFuZChpZDogc3RyaW5nKTogdm9pZDtcclxuICAgIH07XHJcbn1cclxuXHJcbmludGVyZmFjZSBSZWdleFF1aWNrQWN0aW9uc1NldHRpbmdzIHtcclxuICAgIHJ1bGVzOiBzdHJpbmdbXTtcclxuICAgIGRlZmF1bHRSdWxlOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgY29uZmlybUZvbGRlckFjdGlvbjogYm9vbGVhbjtcclxufVxyXG5cclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUmVnZXhRdWlja0FjdGlvbnNTZXR0aW5ncyA9IHtcclxuICAgIHJ1bGVzOiBbXSxcclxuICAgIGRlZmF1bHRSdWxlOiBudWxsLFxyXG4gICAgY29uZmlybUZvbGRlckFjdGlvbjogdHJ1ZVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWdleFF1aWNrQWN0aW9ucyBleHRlbmRzIFBsdWdpbiB7XHJcbiAgICBzZXR0aW5nczogUmVnZXhRdWlja0FjdGlvbnNTZXR0aW5ncztcclxuICAgIHBhdGhUb1J1bGVzZXRzOiBzdHJpbmc7XHJcblxyXG4gICAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5wYXRoVG9SdWxlc2V0cyA9IHRoaXMuYXBwLnZhdWx0LmNvbmZpZ0RpciArIFwiL3JlZ2V4LXJ1bGVzZXRzXCI7XHJcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBSZWdleFF1aWNrQWN0aW9uc1NldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MucnVsZXMuZm9yRWFjaChydWxlTmFtZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkUnVsZUNvbW1hbmQocnVsZU5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImZpbGUtbWVudVwiLCAobWVudTogTWVudSwgZmlsZTogVEFic3RyYWN0RmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiB0aGlzLnNldHRpbmdzLmRlZmF1bHRSdWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSh0KCdSVU5fREVGQVVMVCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJwbGF5XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHBseVJ1bGVzZXRUb0ZpbGUoZmlsZSwgdGhpcy5zZXR0aW5ncy5kZWZhdWx0UnVsZSEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURm9sZGVyICYmIHRoaXMuc2V0dGluZ3MuZGVmYXVsdFJ1bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKHQoJ1JVTl9ERUZBVUxUX09OX0ZPTERFUicpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJwbGF5XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcnVuID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcGx5UnVsZXNldFRvRm9sZGVyKGZpbGUsIHRoaXMuc2V0dGluZ3MuZGVmYXVsdFJ1bGUhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmNvbmZpcm1Gb2xkZXJBY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IENvbmZpcm1hdGlvbk1vZGFsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0KCdGT0xERVJfQUNUSU9OX0NPTkZJUk1fVElUTEUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQoJ0ZPTERFUl9BQ1RJT05fQ09ORklSTV9NU0cnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQoJ1lFUycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcclxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZWRpdG9yLW1lbnVcIiwgKG1lbnU6IE1lbnUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlZmF1bHRSdWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSh0KCdSVU5fREVGQVVMVCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJwbGF5XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHBseVJ1bGVzZXQodGhpcy5wYXRoVG9SdWxlc2V0cyArIFwiL1wiICsgdGhpcy5zZXR0aW5ncy5kZWZhdWx0UnVsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLnJlbG9hZFJ1bGVzZXRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDb21tYW5kSWQobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYGFwcGx5LXJ1bGUtJHtuYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15hLXowLTldL2csICctJyl9YDtcclxuICAgIH1cclxuXHJcbiAgICBhZGRSdWxlQ29tbWFuZChuYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogdGhpcy5nZXRDb21tYW5kSWQobmFtZSksXHJcbiAgICAgICAgICAgIG5hbWU6IGAke25hbWV9YCxcclxuICAgICAgICAgICAgY2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVNYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZU1hcmtkb3duVmlldykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVJ1bGVzZXQodGhpcy5wYXRoVG9SdWxlc2V0cyArIFwiL1wiICsgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlbG9hZFJ1bGVzZXRzKCkge1xyXG4gICAgICAgIGlmICghYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModGhpcy5wYXRoVG9SdWxlc2V0cykpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKHRoaXMucGF0aFRvUnVsZXNldHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjcmVhdGVSdWxlc2V0KG5hbWU6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5ydWxlcy51bnNoaWZ0KG5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLnBhdGhUb1J1bGVzZXRzICsgXCIvXCIgKyBuYW1lO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocGF0aCwgY29udGVudCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB0aGlzLmFkZFJ1bGVDb21tYW5kKG5hbWUpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZVJ1bGVzZXQob2xkTmFtZTogc3RyaW5nLCBuZXdOYW1lOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IG9sZFBhdGggPSB0aGlzLnBhdGhUb1J1bGVzZXRzICsgXCIvXCIgKyBvbGROYW1lO1xyXG4gICAgICAgIGNvbnN0IG5ld1BhdGggPSB0aGlzLnBhdGhUb1J1bGVzZXRzICsgXCIvXCIgKyBuZXdOYW1lO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUobmV3UGF0aCwgY29udGVudCk7XHJcbiAgICAgICAgaWYgKG9sZE5hbWUgIT09IG5ld05hbWUpIHtcclxuICAgICAgICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG9sZFBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlbW92ZShvbGRQYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAodGhpcy5hcHAgYXMgQ29tbWFuZEFwcCkuY29tbWFuZHMucmVtb3ZlQ29tbWFuZChgJHt0aGlzLm1hbmlmZXN0LmlkfToke3RoaXMuZ2V0Q29tbWFuZElkKG9sZE5hbWUpfWApO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuc2V0dGluZ3MucnVsZXMuaW5kZXhPZihvbGROYW1lKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5ydWxlc1tpbmRleF0gPSBuZXdOYW1lO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVmYXVsdFJ1bGUgPT09IG9sZE5hbWUpIHRoaXMuc2V0dGluZ3MuZGVmYXVsdFJ1bGUgPSBuZXdOYW1lO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkUnVsZUNvbW1hbmQobmV3TmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGVsZXRlUnVsZXNldChuYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5wYXRoVG9SdWxlc2V0cyArIFwiL1wiICsgbmFtZTtcclxuICAgICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMocGF0aCkpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZW1vdmUocGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICh0aGlzLmFwcCBhcyBDb21tYW5kQXBwKS5jb21tYW5kcy5yZW1vdmVDb21tYW5kKGAke3RoaXMubWFuaWZlc3QuaWR9OiR7dGhpcy5nZXRDb21tYW5kSWQobmFtZSl9YCk7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5ydWxlcyA9IHRoaXMuc2V0dGluZ3MucnVsZXMuZmlsdGVyKHIgPT4gciAhPT0gbmFtZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVmYXVsdFJ1bGUgPT09IG5hbWUpIHRoaXMuc2V0dGluZ3MuZGVmYXVsdFJ1bGUgPSBudWxsO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYXBwbHlSdWxlc2V0VG9GaWxlKGZpbGU6IFRGaWxlLCBydWxlc2V0TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMucGF0aFRvUnVsZXNldHMgKyBcIi9cIiArIHJ1bGVzZXROYW1lO1xyXG4gICAgICAgIGlmICghYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMocGF0aCkpIHJldHVybjtcclxuICAgICAgICBjb25zdCBydWxlVGV4dCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChwYXRoKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjb3VudCA9IGF3YWl0IHRoaXMubW9kaWZ5RmlsZShmaWxlLCBydWxlVGV4dCwgcnVsZXNldE5hbWUpO1xyXG4gICAgICAgIG5ldyBOb3RpY2UodCgnRVhFQ1VURURfTVNHJywgcnVsZXNldE5hbWUsIGNvdW50KSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYXBwbHlSdWxlc2V0VG9Gb2xkZXIoZm9sZGVyOiBURm9sZGVyLCBydWxlc2V0TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMucGF0aFRvUnVsZXNldHMgKyBcIi9cIiArIHJ1bGVzZXROYW1lO1xyXG4gICAgICAgIGlmICghYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMocGF0aCkpIHJldHVybjtcclxuICAgICAgICBjb25zdCBydWxlVGV4dCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChwYXRoKTtcclxuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZiA9PiBmLnBhdGguc3RhcnRzV2l0aChmb2xkZXIucGF0aCArIFwiL1wiKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHRvdGFsQ291bnQgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xyXG4gICAgICAgICAgICB0b3RhbENvdW50ICs9IGF3YWl0IHRoaXMubW9kaWZ5RmlsZShmaWxlLCBydWxlVGV4dCwgcnVsZXNldE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBuZXcgTm90aWNlKHQoJ0VYRUNVVEVEX01TRycsIHJ1bGVzZXROYW1lLCB0b3RhbENvdW50KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBtb2RpZnlGaWxlKGZpbGU6IFRGaWxlLCBydWxlVGV4dDogc3RyaW5nLCBydWxlc2V0TmFtZTogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoYWN0aXZlVmlldyAmJiBhY3RpdmVWaWV3LmZpbGU/LnBhdGggPT09IGZpbGUucGF0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcclxuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsID0gZWRpdG9yLmdldFNjcm9sbEluZm8oKTtcclxuICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wcm9jZXNzUmVnZXgoZWRpdG9yLmdldFZhbHVlKCksIHJ1bGVUZXh0LCBydWxlc2V0TmFtZSk7XHJcbiAgICAgICAgICAgIGVkaXRvci5zZXRWYWx1ZShyZXN1bHQuY29udGVudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvcik7XHJcbiAgICAgICAgICAgIGVkaXRvci5zY3JvbGxUbygwLCBzY3JvbGwudG9wKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5jb3VudDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucHJvY2Vzc1JlZ2V4KGZpbGVDb250ZW50LCBydWxlVGV4dCwgcnVsZXNldE5hbWUpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgcmVzdWx0LmNvbnRlbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmNvdW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHByb2Nlc3NSZWdleChzdWJqZWN0OiBzdHJpbmcsIHJ1bGVUZXh0OiBzdHJpbmcsIHJ1bGVzZXROYW1lOiBzdHJpbmcpOiB7IGNvbnRlbnQ6IHN0cmluZywgY291bnQ6IG51bWJlciB9IHtcclxuICAgICAgICBjb25zdCBydWxlUGFyc2VyID0gL15cIiguKz8pXCIoW2Etel0qPykoPzpcXHJcXG58XFxyfFxcbik/LT4oPzpcXHJcXG58XFxyfFxcbik/XCIoLio/KVwiKFthLXpdKj8pKD86XFxyXFxufFxccnxcXG4pPyQvZ211cztcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIGxldCBydWxlTWF0Y2hlcztcclxuICAgICAgICBsZXQgb3V0cHV0ID0gc3ViamVjdDtcclxuICAgICAgICB3aGlsZSAoKHJ1bGVNYXRjaGVzID0gcnVsZVBhcnNlci5leGVjKHJ1bGVUZXh0KSkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgWyAsIHBhdHRlcm4sIGZsYWdzLCByZXBsYWNlbWVudCwgbW9kZSBdID0gcnVsZU1hdGNoZXM7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaFJ1bGUgPSBuZXcgUmVnRXhwKHBhdHRlcm4sIGZsYWdzIHx8ICdnbScpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gbW9kZSA9PT0gJ3gnID8gb3V0cHV0LnJlcGxhY2UobWF0Y2hSdWxlLCAnJykgOiBvdXRwdXQucmVwbGFjZShtYXRjaFJ1bGUsIHJlcGxhY2VtZW50KTtcclxuICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFJlZ2V4IFF1aWNrIEFjdGlvbnM6IEludmFsaWQgUmVnZXggaW4gJHtydWxlc2V0TmFtZX1gLCBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBjb250ZW50OiBvdXRwdXQsIGNvdW50IH07XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYXBwbHlSdWxlc2V0KHJ1bGVzZXRQYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAoIWF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHJ1bGVzZXRQYXRoKSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKHJ1bGVzZXRQYXRoICsgdCgnTk9UX0ZPVU5EX0VSUicpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBydWxlVGV4dCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChydWxlc2V0UGF0aCk7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlTWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICBpZiAoIWFjdGl2ZU1hcmtkb3duVmlldykgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZU1hcmtkb3duVmlldy5lZGl0b3I7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgc3ViamVjdCA9IGVkaXRvci5zb21ldGhpbmdTZWxlY3RlZCgpID8gZWRpdG9yLmdldFNlbGVjdGlvbigpIDogZWRpdG9yLmdldFZhbHVlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcG9zID0gZWRpdG9yLmdldFNjcm9sbEluZm8oKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnByb2Nlc3NSZWdleChzdWJqZWN0LCBydWxlVGV4dCwgcnVsZXNldFBhdGgpO1xyXG4gICAgICAgIGlmIChlZGl0b3Iuc29tZXRoaW5nU2VsZWN0ZWQoKSkgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24ocmVzdWx0LmNvbnRlbnQpO1xyXG4gICAgICAgIGVsc2UgZWRpdG9yLnNldFZhbHVlKHJlc3VsdC5jb250ZW50KTtcclxuICAgICAgICBlZGl0b3Iuc2Nyb2xsVG8oMCwgcG9zLnRvcCk7XHJcbiAgICAgICAgbmV3IE5vdGljZSh0KCdFWEVDVVRFRF9NU0cnLCBydWxlc2V0UGF0aC5zcGxpdCgnLycpLnBvcCgpIHx8ICcnLCByZXN1bHQuY291bnQpKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ29uZmlybWF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJpdmF0ZSB0aXRsZTogc3RyaW5nLCBwcml2YXRlIG1lc3NhZ2U6IHN0cmluZywgcHJpdmF0ZSBjb25maXJtQnRuVGV4dDogc3RyaW5nLCBwcml2YXRlIG9uQ29uZmlybTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICB9XHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQodGhpcy50aXRsZSk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IHRoaXMubWVzc2FnZSB9KTtcclxuICAgICAgICBjb25zdCBidG5Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3JwLW1vZGFsLWJ1dHRvbnNcIiB9KTtcclxuICAgICAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGJ0bkNvbnRhaW5lcikuc2V0QnV0dG9uVGV4dCh0KCdDQU5DRUwnKSkub25DbGljaygoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgICAgIG5ldyBCdXR0b25Db21wb25lbnQoYnRuQ29udGFpbmVyKS5zZXRCdXR0b25UZXh0KHRoaXMuY29uZmlybUJ0blRleHQpLnNldFdhcm5pbmcoKS5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkNvbmZpcm0oKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgb25DbG9zZSgpIHsgdGhpcy5jb250ZW50RWwuZW1wdHkoKTsgfVxyXG59XHJcblxyXG5jbGFzcyBSZWdleFF1aWNrQWN0aW9uc1NldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgICBwbHVnaW46IFJlZ2V4UXVpY2tBY3Rpb25zO1xyXG4gICAgc2hvd0NyZWF0aW9uRm9ybSA9IGZhbHNlO1xyXG4gICAgZWRpdGluZ1J1bGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG4gICAgdGVtcE5hbWUgPSBcIlwiO1xyXG4gICAgdGVtcFBhdHRlcm4gPSBcIlwiO1xyXG4gICAgdGVtcEZsYWdzID0gXCJnbVwiO1xyXG4gICAgdGVtcFJlcGxhY2VtZW50ID0gXCJcIjtcclxuICAgIHRlbXBJc0RlZmF1bHQgPSBmYWxzZTtcclxuXHJcbiAgICBuYW1lSW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcclxuICAgIHBhdHRlcm5JbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgZmxhZ3NJbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFJlZ2V4UXVpY2tBY3Rpb25zKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldEhlYWRpbmcoKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSh0KCdQTFVHSU5fU0VUVElOR1NfSEVBREVSJykpO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiB0KCdQTFVHSU5fREVTQycpLCBjbHM6IFwib3JwLXNldHRpbmdzLWRlc2NyaXB0aW9uXCIgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0SGVhZGluZygpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKHQoJ0dFTkVSQUxfU0VDVElPTl9IRUFERVInKSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSh0KCdDT05GSVJNX0ZPTERFUl9BQ1RJT04nKSlcclxuICAgICAgICAgICAgLnNldERlc2ModCgnQ09ORklSTV9GT0xERVJfQUNUSU9OX0RFU0MnKSlcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybUZvbGRlckFjdGlvbilcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtRm9sZGVyQWN0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0SGVhZGluZygpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKHQoJ01BTkFHRV9TRUNUSU9OX0hFQURFUicpKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKHQoJ0FERF9RVUlDS19BQ1RJT04nKSlcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidG4gPT4gYnRuXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCh0KCdBREQnKSlcclxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRUZW1wRmllbGRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q3JlYXRpb25Gb3JtID0gIXRoaXMuc2hvd0NyZWF0aW9uRm9ybTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0NyZWF0aW9uRm9ybSkge1xyXG4gICAgICAgICAgICBjb25zdCBmb3JtQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3JwLWNyZWF0aW9uLXJvd1wiIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckZvcm1GaWVsZHMoZm9ybUNvbnRhaW5lciwgKCkgPT4gdGhpcy5oYW5kbGVTYXZlKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbGlzdFdyYXBwZXIgPSBjb250YWluZXJFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvcnAtc2F2ZWQtbGlzdFwiIH0pO1xyXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzLmZvckVhY2goYXN5bmMgbmFtZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1Sb3cgPSBsaXN0V3JhcHBlci5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvcnAtc2F2ZWQtcnVsZS1pdGVtXCIgfSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRpbmdSdWxlID09PSBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckZvcm1GaWVsZHMoaXRlbVJvdywgKCkgPT4gdGhpcy5oYW5kbGVVcGRhdGUobmFtZSksIHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgLy8gRklYRUQ6IGFkZGVkIGNvbW1lbnQgdG8gZW1wdHkgY2F0Y2ggYmxvY2sgdG8gc2F0aXNmeSBuby1lbXB0eSBsaW50ZXIgcnVsZVxyXG4gICAgICAgICAgICAgICAgdHJ5IHsgY29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodGhpcy5wbHVnaW4ucGF0aFRvUnVsZXNldHMgKyBcIi9cIiArIG5hbWUpOyB9IGNhdGNoIHsgLyogaWdub3JlIGlmIGZpbGUgZG9lc24ndCBleGlzdCAqLyB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhdHRlcm4sIGZsYWdzLCByZXBsYWNlbWVudCB9ID0gdGhpcy5wYXJzZVJ1bGVDb250ZW50KGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZVdyYXAgPSBpdGVtUm93LmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm9ycC1pbnB1dC13cmFwIG9ycC1uYW1lLWZpZWxkXCIgfSk7XHJcbiAgICAgICAgICAgICAgICBuYW1lV3JhcC5jcmVhdGVFbChcInNtYWxsXCIsIHsgdGV4dDogdCgnQUNUSU9OX05BTUUnKSwgY2xzOiBcIm9ycC1sYWJlbFwiIH0pO1xyXG4gICAgICAgICAgICAgICAgbmFtZVdyYXAuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBuYW1lLCBjbHM6IFwib3JwLXNhdmVkLXRleHQtZGlzcGxheVwiIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRzUm93ID0gaXRlbVJvdy5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvcnAtZmllbGRzLXJvd1wiIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVEaXNwbGF5RmllbGQoZmllbGRzUm93LCB0KCdTRUFSQ0hfUkVHRVgnKSwgcGF0dGVybiwgXCJvcnAtcGF0dGVybi1maWVsZFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlRGlzcGxheUZpZWxkKGZpZWxkc1JvdywgdCgnRkxBR1MnKSwgZmxhZ3MsIFwib3JwLWZsYWdzLWZpZWxkXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVEaXNwbGF5RmllbGQoZmllbGRzUm93LCB0KCdSRVBMQUNFTUVOVCcpLCByZXBsYWNlbWVudCwgXCJvcnAtcmVwbGFjZW1lbnQtZmllbGRcIik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb25zV3JhcCA9IGl0ZW1Sb3cuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3JwLWlucHV0LXdyYXAgb3JwLWNyZWF0aW9uLWFjdGlvbnNcIiB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRXcmFwID0gYWN0aW9uc1dyYXAuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3JwLWRlZmF1bHQtdG9nZ2xlLXdyYXBcIiB9KTtcclxuICAgICAgICAgICAgICAgIG5ldyBUb2dnbGVDb21wb25lbnQoZGVmYXVsdFdyYXApXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRSdWxlID09PSBuYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFJ1bGUgPSB2YWx1ZSA/IG5hbWUgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0V3JhcC5jcmVhdGVTcGFuKHsgdGV4dDogdCgnU0VUX0FTX0RFRkFVTFQnKSwgY2xzOiBcIm9ycC10b2dnbGUtbGFiZWxcIiB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBhY3Rpb25zV3JhcC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvcnAtYWN0aW9uLWJ1dHRvbnNcIiB9KTtcclxuICAgICAgICAgICAgICAgIG5ldyBCdXR0b25Db21wb25lbnQoYnV0dG9ucykuc2V0QnV0dG9uVGV4dCh0KCdFRElUJykpLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VDb250ZW50VG9GaWVsZHMobmFtZSwgY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nUnVsZSA9IG5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Q3JlYXRpb25Gb3JtID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG5ldyBCdXR0b25Db21wb25lbnQoYnV0dG9ucykuc2V0QnV0dG9uVGV4dCh0KCdERUxFVEUnKSkuc2V0V2FybmluZygpLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBDb25maXJtYXRpb25Nb2RhbCh0aGlzLmFwcCwgdCgnREVMRVRFX0hFQURFUicpLCB0KCdERUxFVEVfQ09ORklSTScsIG5hbWUpLCB0KCdZRVMnKSwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kZWxldGVSdWxlc2V0KG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KS5vcGVuKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlRGlzcGxheUZpZWxkKHBhcmVudDogSFRNTEVsZW1lbnQsIGxhYmVsOiBzdHJpbmcsIHZhbDogc3RyaW5nLCBjbHM6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHdyYXAgPSBwYXJlbnQuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IGBvcnAtaW5wdXQtd3JhcCAke2Nsc31gIH0pO1xyXG4gICAgICAgIHdyYXAuY3JlYXRlRWwoXCJzbWFsbFwiLCB7IHRleHQ6IGxhYmVsLCBjbHM6IFwib3JwLWxhYmVsXCIgfSk7XHJcbiAgICAgICAgd3JhcC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IHZhbCwgY2xzOiBcIm9ycC1zYXZlZC10ZXh0LWRpc3BsYXlcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckZvcm1GaWVsZHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgb25Db25maXJtOiAoKSA9PiB2b2lkLCBpc1VwZGF0ZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZVdyYXAgPSBjb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3JwLWlucHV0LXdyYXAgb3JwLW5hbWUtZmllbGRcIiB9KTtcclxuICAgICAgICBuYW1lV3JhcC5jcmVhdGVFbChcInNtYWxsXCIsIHsgdGV4dDogdCgnQUNUSU9OX05BTUUnKSwgY2xzOiBcIm9ycC1sYWJlbFwiIH0pO1xyXG4gICAgICAgIHRoaXMubmFtZUlucHV0RWwgPSBuYW1lV3JhcC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIHZhbHVlOiB0aGlzLnRlbXBOYW1lLCBwbGFjZWhvbGRlcjogdCgnUExBQ0VIT0xERVJfTkFNRScpLCBjbHM6IFwib3JwLWlucHV0XCIgfSk7XHJcbiAgICAgICAgdGhpcy5uYW1lSW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHRoaXMudGVtcE5hbWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUpO1xyXG5cclxuICAgICAgICBjb25zdCBmaWVsZHNSb3cgPSBjb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3JwLWZpZWxkcy1yb3dcIiB9KTtcclxuICAgICAgICB0aGlzLnBhdHRlcm5JbnB1dEVsID0gdGhpcy5jcmVhdGVJbnB1dEZpZWxkKGZpZWxkc1JvdywgdCgnU0VBUkNIX1JFR0VYJyksIHRoaXMudGVtcFBhdHRlcm4sIHQoJ1BMQUNFSE9MREVSX1NFQVJDSCcpLCBcIm9ycC1wYXR0ZXJuLWZpZWxkXCIsICh2KSA9PiB0aGlzLnRlbXBQYXR0ZXJuID0gdik7XHJcbiAgICAgICAgdGhpcy5mbGFnc0lucHV0RWwgPSB0aGlzLmNyZWF0ZUlucHV0RmllbGQoZmllbGRzUm93LCB0KCdGTEFHUycpLCB0aGlzLnRlbXBGbGFncywgdCgnUExBQ0VIT0xERVJfRkxBR1MnKSwgXCJvcnAtZmxhZ3MtZmllbGRcIiwgKHYpID0+IHRoaXMudGVtcEZsYWdzID0gdik7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVJbnB1dEZpZWxkKGZpZWxkc1JvdywgdCgnUkVQTEFDRU1FTlQnKSwgdGhpcy50ZW1wUmVwbGFjZW1lbnQsIHQoJ1BMQUNFSE9MREVSX1JFUExBQ0VNRU5UJyksIFwib3JwLXJlcGxhY2VtZW50LWZpZWxkXCIsICh2KSA9PiB0aGlzLnRlbXBSZXBsYWNlbWVudCA9IHYpO1xyXG5cclxuICAgICAgICBjb25zdCBhY3Rpb25zV3JhcCA9IGNvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvcnAtaW5wdXQtd3JhcCBvcnAtY3JlYXRpb24tYWN0aW9uc1wiIH0pO1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRXcmFwID0gYWN0aW9uc1dyYXAuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib3JwLWRlZmF1bHQtdG9nZ2xlLXdyYXBcIiB9KTtcclxuICAgICAgICBjb25zdCBpbml0aWFsVG9nZ2xlVmFsdWUgPSBpc1VwZGF0ZSA/ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0UnVsZSA9PT0gdGhpcy5lZGl0aW5nUnVsZSkgOiB0aGlzLnRlbXBJc0RlZmF1bHQ7XHJcbiAgICAgICAgbmV3IFRvZ2dsZUNvbXBvbmVudChkZWZhdWx0V3JhcClcclxuICAgICAgICAgICAgLnNldFZhbHVlKGluaXRpYWxUb2dnbGVWYWx1ZSlcclxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFJ1bGUgPSB2YWx1ZSA/IHRoaXMudGVtcE5hbWUgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBJc0RlZmF1bHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgZGVmYXVsdFdyYXAuY3JlYXRlU3Bhbih7IHRleHQ6IHQoJ1NFVF9BU19ERUZBVUxUJyksIGNsczogXCJvcnAtdG9nZ2xlLWxhYmVsXCIgfSk7XHJcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IGFjdGlvbnNXcmFwLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm9ycC1hY3Rpb24tYnV0dG9uc1wiIH0pO1xyXG4gICAgICAgIG5ldyBCdXR0b25Db21wb25lbnQoYnV0dG9ucykuc2V0QnV0dG9uVGV4dChpc1VwZGF0ZSA/IHQoJ1NBVkUnKSA6IHQoJ1NBVkUnKSkuc2V0Q3RhKCkub25DbGljayhvbkNvbmZpcm0pO1xyXG4gICAgICAgIG5ldyBCdXR0b25Db21wb25lbnQoYnV0dG9ucykuc2V0QnV0dG9uVGV4dCh0KCdDQU5DRUwnKSkub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdGluZ1J1bGUgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDcmVhdGlvbkZvcm0gPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVJbnB1dEZpZWxkKHBhcmVudDogSFRNTEVsZW1lbnQsIGxhYmVsOiBzdHJpbmcsIHZhbDogc3RyaW5nLCBwaDogc3RyaW5nLCBjbHM6IHN0cmluZywgb25DaGFuZ2U6ICh2OiBzdHJpbmcpID0+IHZvaWQpOiBIVE1MSW5wdXRFbGVtZW50IHtcclxuICAgICAgICBjb25zdCB3cmFwID0gcGFyZW50LmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBgb3JwLWlucHV0LXdyYXAgJHtjbHN9YCB9KTtcclxuICAgICAgICB3cmFwLmNyZWF0ZUVsKFwic21hbGxcIiwgeyB0ZXh0OiBsYWJlbCwgY2xzOiBcIm9ycC1sYWJlbFwiIH0pO1xyXG4gICAgICAgIGNvbnN0IGlucHV0ID0gd3JhcC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIHZhbHVlOiB2YWwsIHBsYWNlaG9sZGVyOiBwaCwgY2xzOiBcIm9ycC1pbnB1dFwiIH0pO1xyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4gb25DaGFuZ2UoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKSk7XHJcbiAgICAgICAgcmV0dXJuIGlucHV0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdHJpZ2dlckZpZWxkRXJyb3IoZWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCFlbCkgcmV0dXJuO1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpZWxkLWVycm9yJyk7XHJcbiAgICAgICAgdm9pZCBlbC5vZmZzZXRXaWR0aDtcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdmaWVsZC1lcnJvcicpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdmFsaWRhdGVJbnB1dHMoaXNVcGRhdGUgPSBmYWxzZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHRyaW1tZWROYW1lID0gdGhpcy50ZW1wTmFtZS50cmltKCk7XHJcbiAgICAgICAgaWYgKCF0cmltbWVkTmFtZSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKHQoJ05BTUVfRU1QVFlfRVJSJykpO1xyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJGaWVsZEVycm9yKHRoaXMubmFtZUlucHV0RWwpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBuYW1lRXhpc3RzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXMuc29tZShuYW1lID0+IFxyXG4gICAgICAgICAgICBuYW1lLnRvTG93ZXJDYXNlKCkgPT09IHRyaW1tZWROYW1lLnRvTG93ZXJDYXNlKCkgJiYgKCFpc1VwZGF0ZSB8fCBuYW1lICE9PSB0aGlzLmVkaXRpbmdSdWxlKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKG5hbWVFeGlzdHMpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSh0KCdOQU1FX0VYSVNUU19FUlInKSk7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckZpZWxkRXJyb3IodGhpcy5uYW1lSW5wdXRFbCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy50ZW1wUGF0dGVybi50cmltKCkpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSh0KCdQQVRURVJOX0VNUFRZX0VSUicpKTtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyRmllbGRFcnJvcih0aGlzLnBhdHRlcm5JbnB1dEVsKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbmV3IFJlZ0V4cCh0aGlzLnRlbXBQYXR0ZXJuLCB0aGlzLnRlbXBGbGFncyB8fCAnZ20nKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlLnRvTG93ZXJDYXNlKCkgOiBTdHJpbmcoZSkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgY29uc3QgaXNGbGFnRXJyb3IgPSBlcnJvck1zZy5pbmNsdWRlcyhcImZsYWdcIikgfHwgL1teZ2ltc3V5XS8udGVzdCh0aGlzLnRlbXBGbGFncyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoaXNGbGFnRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UodCgnRkxBR1NfSU5WQUxJRF9FUlInKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJGaWVsZEVycm9yKHRoaXMuZmxhZ3NJbnB1dEVsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UodCgnUkVHRVhfSU5WQUxJRF9FUlInKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJGaWVsZEVycm9yKHRoaXMucGF0dGVybklucHV0RWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVTYXZlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy52YWxpZGF0ZUlucHV0cyhmYWxzZSkpIHJldHVybjtcclxuICAgICAgICBjb25zdCBjb250ZW50ID0gYFwiJHt0aGlzLnRlbXBQYXR0ZXJufVwiJHt0aGlzLnRlbXBGbGFnc31cXG4tPlxcblwiJHt0aGlzLnRlbXBSZXBsYWNlbWVudH1cImA7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uY3JlYXRlUnVsZXNldCh0aGlzLnRlbXBOYW1lLCBjb250ZW50KTtcclxuICAgICAgICBpZiAodGhpcy50ZW1wSXNEZWZhdWx0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRSdWxlID0gdGhpcy50ZW1wTmFtZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2hvd0NyZWF0aW9uRm9ybSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlVXBkYXRlKG9sZE5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmICghdGhpcy52YWxpZGF0ZUlucHV0cyh0cnVlKSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBgXCIke3RoaXMudGVtcFBhdHRlcm59XCIke3RoaXMudGVtcEZsYWdzfVxcbi0+XFxuXCIke3RoaXMudGVtcFJlcGxhY2VtZW50fVwiYDtcclxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi51cGRhdGVSdWxlc2V0KG9sZE5hbWUsIHRoaXMudGVtcE5hbWUsIGNvbnRlbnQpO1xyXG4gICAgICAgIHRoaXMuZWRpdGluZ1J1bGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VSdWxlQ29udGVudChjb250ZW50OiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBwYXJzZXIgPSAvXlwiKC4rPylcIihbYS16XSo/KSg/OlxcclxcbnxcXHJ8XFxuKT8tPig/OlxcclxcbnxcXHJ8XFxuKT9cIiguKj8pXCIoW2Etel0qPykkL211cztcclxuICAgICAgICBjb25zdCBtYXRjaCA9IHBhcnNlci5leGVjKGNvbnRlbnQpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHBhdHRlcm46IG1hdGNoID8gbWF0Y2hbMV0gOiBcIlwiLFxyXG4gICAgICAgICAgICBmbGFnczogbWF0Y2ggPyBtYXRjaFsyXSA6IFwiZ21cIixcclxuICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IG1hdGNoID8gbWF0Y2hbM10gOiBcIlwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlQ29udGVudFRvRmllbGRzKG5hbWU6IHN0cmluZywgY29udGVudDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMucGFyc2VSdWxlQ29udGVudChjb250ZW50KTtcclxuICAgICAgICB0aGlzLnRlbXBOYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnRlbXBQYXR0ZXJuID0gZGF0YS5wYXR0ZXJuO1xyXG4gICAgICAgIHRoaXMudGVtcEZsYWdzID0gZGF0YS5mbGFncztcclxuICAgICAgICB0aGlzLnRlbXBSZXBsYWNlbWVudCA9IGRhdGEucmVwbGFjZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXNldFRlbXBGaWVsZHMoKSB7XHJcbiAgICAgICAgdGhpcy50ZW1wTmFtZSA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy50ZW1wUGF0dGVybiA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy50ZW1wRmxhZ3MgPSBcImdtXCI7XHJcbiAgICAgICAgdGhpcy50ZW1wUmVwbGFjZW1lbnQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMudGVtcElzRGVmYXVsdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZWRpdGluZ1J1bGUgPSBudWxsO1xyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIm1vbWVudCIsIlBsdWdpbiIsIlRGaWxlIiwiVEZvbGRlciIsIk1hcmtkb3duVmlldyIsIk5vdGljZSIsIk1vZGFsIiwiQnV0dG9uQ29tcG9uZW50IiwiUGx1Z2luU2V0dGluZ1RhYiIsIlNldHRpbmciLCJUb2dnbGVDb21wb25lbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFvR0E7QUFDTyxTQUFTLFNBQVMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUU7QUFDN0QsSUFBSSxTQUFTLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxPQUFPLEtBQUssWUFBWSxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLFVBQVUsT0FBTyxFQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7QUFDaEgsSUFBSSxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDL0QsUUFBUSxTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0FBQ25HLFFBQVEsU0FBUyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0FBQ3RHLFFBQVEsU0FBUyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsTUFBTSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQyxFQUFFO0FBQ3RILFFBQVEsSUFBSSxDQUFDLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLFVBQVUsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQzlFLEtBQUssQ0FBQyxDQUFDO0FBQ1AsQ0FB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
